---
title: Testing & Simulation
description: Tools for simulating Charge Points, replaying traffic, and stress-testing your infrastructure.
---

import { Callout } from "fumadocs-ui/components/callout";

## `ocpp simulate`

An interactive, terminal-based Charge Point simulator. It allows you to manually trigger OCPP messages and observe responses in real-time.

### Usage

```bash
ocpp simulate [options]
```

### Options

| Option | Alias | Default | Description |
| :--- | :--- | :--- | :--- |
| `--identity` | `-i` | `Simulated-CP-01` | The unique Identity (ChargeBox ID) of the simulated CP. |
| `--endpoint` | `-e` | `ws://localhost:3000` | The WebSocket URL of your CSMS server. |

### Commands (Interactive Mode)

Once connected, you can type the following keys:

- `B`: Send `BootNotification`
- `H`: Send `Heartbeat`
- `S`: Send `StatusNotification`
- `Q`: Quit simulation

---

## `ocpp virtual-station`

A fully automated, stateful Virtual Charge Point simulator. It maintains internal state (Available, Charging, Faulted) and automatically responds to CSMS commands like `RemoteStartTransaction` or `GetDiagnostics`.

### Usage

```bash
ocpp virtual-station [options]
```

### Options

| Option | Alias | Default | Description |
| :--- | :--- | :--- | :--- |
| `--identity` | `-i` | `VS-001` | The unique Identity of the Virtual Station. |
| `--endpoint` | `-e` | `ws://localhost:3000` | The WebSocket URL of your CSMS server. |
| `--protocol` | `-p` | `ocpp1.6` | OCPP Protocol version to simulate (e.g., `ocpp1.6`, `ocpp2.0.1`). |

### Supported Features

- **Boot Sequence**: Automatically sends `BootNotification` and starts heartbeat loop.
- **Remote Control**: Handles `RemoteStartTransaction` and `RemoteStopTransaction`.
- **Status Updates**: Automatically transitions states (Available -> Preparing -> Charging) and sends `StatusNotification`.
- **Firmware Updates**: Simulates `UpdateFirmware` process (Download -> Install -> Reboot).
- **Diagnostics**: Simulates `GetDiagnostics` log upload.

---

## `ocpp call`

Sends a single, one-off JSON payload to a CSMS and logs the response. Useful for quick testing or debugging specific message handlers.

### Usage

```bash
ocpp call <method> [payload] [options]
```

### Options

| Option | Alias | Default | Description |
| :--- | :--- | :--- | :--- |
| `--identity` | `-i` | `CLI-Agent` | The Identity to use for the connection. |
| `--endpoint` | `-e` | `ws://localhost:3000` | The WebSocket URL of your CSMS server. |

### Example

```bash
ocpp call BootNotification '{"chargePointModel": "TestModel", "chargePointVendor": "TestVendor"}'
```

---

## `ocpp load-test`

A distributed load testing engine capable of simulating thousands of concurrent Charge Point connections.

### Usage

```bash
ocpp load-test [options]
```

### Options

| Option | Alias | Default | Description |
| :--- | :--- | :--- | :--- |
| `--endpoint` | `-e` | `ws://localhost:3000` | The WebSocket URL of your CSMS server. |
| `--clients` | `-c` | `100` | Number of concurrent simulated clients. |
| `--ramp-up` | `-r` | `10` | Time in seconds to ramp up connections (staggered connect). |

### Use Case

Validate your infrastructure's scalability, Redis clustering performance, and WebSocket connection limits.

---

## `ocpp fuzz`

A protocol fuzzer that sends malformed, invalid, or unexpected payloads to your CSMS to test its resilience and error handling.

### Usage

```bash
ocpp fuzz [options]
```

### Options

| Option | Alias | Default | Description |
| :--- | :--- | :--- | :--- |
| `--endpoint` | `-e` | `ws://localhost:3000` | The WebSocket URL of your CSMS server. |
| `--workers` | `-w` | `5` | Number of concurrent fuzzing worker threads. |

### What it tests

- **JSON Parsing**: Sends invalid JSON strings.
- **Schema Validation**: Sends payloads missing required fields or with incorrect types.
- **Protocol Compliance**: Sends messages out of sequence or with invalid MessageType IDs.

---

## `ocpp replay`

Replays a sequence of OCPP messages from a log file. This allows you to recreate specific traffic patterns or bug scenarios.

### Usage

```bash
ocpp replay <file> [options]
```

### Options

| Option | Alias | Default | Description |
| :--- | :--- | :--- | :--- |
| `--target` | `-t` | `ws://localhost:3000` | The WebSocket URL of your CSMS server. |

### Log File Format

The input file should be a JSON array of frame objects:

```json
[
  { "delay": 0, "payload": [2, "msg1", "BootNotification", {...}] },
  { "delay": 1000, "payload": [2, "msg2", "Heartbeat", {}] }
]
```
